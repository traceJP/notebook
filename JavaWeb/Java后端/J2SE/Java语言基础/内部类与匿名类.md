## 一、内部类：

- 定义：在一个类中定义另一个类；


（1）内部类

- 在java文件中，内部类编译器将生成xxxx$xxxx这样的class文件


```java
public class A {
 [访问权限符][final | abstract] class B {  // B为A的内部类，注意：内部类不能和外部类同名
    <语句块>
  }
  <语句块>
}
实例化B: A对象名.B name = A对象名.new B(参数);  // 需要实例化外部类
```
- 当内部类使用外部类定义的数据结构时：

```java
外部类名.this.字段或者方法  // 内部类中可以直接访问外部类的任何字段或方法，即使private也可以
```


（2）嵌套类（static修饰符）

- 解释：嵌套类就是内部类用了static修饰符修饰

```java
public class A {
  [访问权限符] static class B {  // 类B实际上是一种外部类
    <语句块>
  }
  <语句块>
}
实例化B：A.B name = new a.b(参数);  // 不需要实例化外部类
```
- 加上修饰符后的主要区别：内部类会被直接实例化，其本质上就是外部类。




## 二、局部类：

- 定义：在一个方法中定义一个类，在一定的范围内，该局部类其实也属于内部类


- 局部类同局部变量一样：

    - 不能使用public等访问权限符修饰

    - 但可以被final或者abstract修饰

- 局部类可以使用外部类的成员，但不能使用方法中的局部变量

    - 原因：方法内的局部变量是只有在该方法调用时才产生的。


```java
class A {
  public Object a(int i) {
    class B {  // 局部类B
      <语句块>
    }
    return new B;  // 返回一个局部类B的实例化对象
  }
}
```

## 三、匿名类：

- 定义：匿名类是一种特殊的内部类，它没有类名，在定义类的同时就生成该类的一个实例，是“一次性使用”的类
- 特点：

1、不取名字，直接用其父类或接口的名字。

- 也就是说，该类是父类的子类，或者实现了一-个接口

- 编译器生成xxxxx$1之类的class文件名字（由编译器自动取名）


2、类的定义的同时就创建实例，即类的定义前面有一个new

- new 父类类名或接口名( ) { ..... }

- 不使用关键词class ，也不使用extends及implements。


3、在构造对象时使用父类构造方法

- 不能够定义构造方法，因为它没有名字

- 如果new对象时，要带参数，则使用父类的构造方法


```java
public class A {
  Object a = new Object() {  // 定义一个匿名类，该类继承Object类
    <语句块>
  };  //注意匿名类需要以分号结尾，该语句就像 int a = 1;一样
}
```


## 四、匿名类在接口中的使用：

- 定义方法：

```java
interface Jk {  // 定义一个接口
  void make();
}

// new一个匿名类，且类中实现JK接口，并用多态将new的匿名类赋给接口test
JK test = new JK() {
  public void make(){  // 实现接口
    <make方法语句块>
  }
  <语句块>
};
```

- 
    方法解读：


\1.   首先注意代码的第5行：接口名 对象名 = new 接口名()  看似是实例化了一个接口对象，但实际上接口对象是不能被实例化的

\2.   再分析代码5-9行{...};  ：注意该代码块是以分号结尾的

\3.   所以综上：后面加花括号这种写法，实际是new了一个实现接口的匿名类，然后通过多态（向上塑型）将new出来的匿名类赋值给接口JK所定义的test对象。开发人员需要在匿名类内部（花括号内）实现你那个接口。

- 接口继承定义：所有实现接口的类都是该接口的子类； 接口只准被实现和继承，与抽象类一样不允许被实例化


- 类比代码：(与上述匿名类代码写法执行效果一致)

```java
class testclass implements JK {  // 定义testclass类并实现JK接口
  public void make(){
    <make方法语句块>
  }
  <语句块>
}
JK test = new testclass;  // 多态（向上）：将new好的子对象赋给父数据类型；
```





