# 团队协作与远程仓库：

- 解释：为了能在任意一Git项目上团队协作,你需要知道如何管理自己的远程仓库。远程仓库是指托管在因特网或其他网络中的你的项目的版本库。你可以有好几个远程仓库,通常有些仓库对你只读，有些则可以读写。与他人协作涉及管理远程仓库以及根据需要推送或拉取数据。管理远程仓库包括了解如何添加远程仓库、移除无效的远程仓库、管理不同的远程分支并定义它们是否被跟踪等等。
- 通过Github平台托管代码，从而达到建立远程仓库区域的效果：
- Github官网：http://github.com

## 1、新建远程仓库：

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image002.gif)

 

## 2、将本地仓库移植到远程仓库中：（配置远程仓库）

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image004.gif)

## 3.新仓库初始化的基本流程：

（1）为远程仓库配置别名：

- github上的远程仓库地址是一段URL，每次输入URL显得十分复杂，所以可以使用一个别名代替这个URL

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image006.gif)

```shell
git remote add <远程仓库别名> <url>  // 通过项目名识别URL（注：https协议url）
```

（1.1）显示别名对应的URL：
```shell
git remote -v  // 显示远程仓库使用的Git别名以及它对应的URL
```
（2）配置个人用户信息（user，email），详细参考Git基础配置个人信息命令。

（3）推送本地项目到远程仓库：
```shell
git push [<远程仓库别名>] [<分支名>]
```
- 推送命令执行时，github需要确认你的个人信息，所以需要进行登录操作

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image008.gif)

- 登陆完毕即执行推送命令，开始向远程仓库推送本地仓库

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image010.gif)

- 推送成功，github上的远程仓库出现了本地push的分支（注：提交时间是指本地的commit命令执行时间）

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image012.gif)

 

 

## 4.仓库克隆：

- 解释：一般在企业开发过程中，远程仓库的初始化是由架构师进行操作，而我们需要去拉取已经初始化好的远程仓库到本地，然后进行工作需求的操作。
```shell
git clone <克隆url>  // 从github上下载仓库到本地,即在本地生成.git文件
/*克隆到本地仓库时，系统会默认为远程仓库配别名 “orgin”，该别名如同master一样的*/
```
- 图为github上的克隆地址：

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image014.gif)


## 5.仓库权限机制：

- 解释：一个大型的仓库有对提交权限的设置，需要通过远程仓库的拥有者邀请协作者加入，而加入进来的协作者将有权限提交代码，否则将因权限问题提交失败。

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image016.gif)

### 5.1.短暂的权限（pull request流程）：

- 解释：如果你想要参与某个项目，但是并没有推送权限，这时可以对这个项目进行“派生”(Fork)。派生的意思是指，GitHub将在你的空间中创建一个完全属于你的项目副本,且你对其具有推送权限。通过这种方式，项目的管理者不再需要忙着把用户添加到贡献者列表并给子他们推送权限。人们可以派生这个项目 ,将修改推送到派生出的项目副本中，并通过创建合并请求(Pull Request)来让他们的改动进入源版本库。

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image018.gif)

 

 

 

## 6.远程仓库同步至本地仓库：

- 这个命令会访问远程仓库，从中拉取所有你还没有的数据。执行完成后，你将会拥有那个远程仓库中所有分支的引用，可以随时合并或查看。必须注意git fetch命令会将数据拉取到你的本地仓库，它并不会自动合并或修改你当前的工作。当准备好时你必须手动将其合并入你的工作。
```shell
git fetch <远程仓库别名>  // 获取远程仓库全部数据到远程跟踪分支
```
### 6.1.三种分支：（在本地的git仓库中是有单独的仓库的分支，同理github的远程仓库也有独立分支）

- 本地主分支：

    - 解释：本地主分支指本地仓库中的master分支

- 远程主分支：

    - 解释：远程主分支指远程仓库中的master分支

- 跟踪分支（远程跟踪分支）：

    - 分支名：远程仓库别名/master

    - 解释：远程跟踪分支是远程分支状态的引用。它是你不能移动的本地分支。当你做任何网络通信操作时，它们会自动移动。

- 远程分支详解：当执行push命令本地仓库推送到远程仓库时，将附带生成一个远程跟踪分支，系统就会通过这个分支将本地分支和远程分支联系起来。其中不管是push命令还是fetch命令，本质上都是远程跟踪分支与远程分支之间的覆盖关系。而在clone过程中，本地的master分支与自主初始化仓库时的master分支意义是不同的，clone所创建的master分支是自动跟踪远程仓库中的master分支的。

- 本地分支跟踪远程跟踪分支：

    - 当本地分支和远程分支未建立联系时，通过push和fetch命令时就需要详细指定分支名（下载或上传哪个远程仓库的文件需要自己指定），而这一步骤可以将其建立联系，即可省略分支名的指定。
```shell
git branch -u <远程跟踪分支名>  // 将本地分支和远程分支建立联系

git checkout -b <本地分支名> <远程跟踪分支名>  // 在新建分支时指定想要跟踪的远程跟踪分支

git checkout --track <远程跟踪分支名>  // 新建一个与远程跟踪分支名相同的本地分支（上个命令简写）

git branch -vv  // 查看设置的所有跟踪分支
```
- 建立联系后使用命令对数据操作：
```shell
git push  // 上传数据

git pull  // 下载数据
```


### 6.2.删除远程分支;
```shell
git push origin --delete serverfix  // 删除远程分支

git remote prune origin --dry-run  // 列出仍在远程跟踪但是远程已被删除的无用分支

git remote prune origin  // 清除上面命令列出的远程跟踪分支
```

## 7.团队协作冲突：

- 解释：假设两个成员A,B在同时进行代码本地仓库修改。A成员首先将自己代码修改后push进远程仓库，B成员在没有将A修改的代码pull进本地仓库的前提下，再次使用push，这时，在远程仓库中将出现冲突问题。

- 如图：git拒绝push代码

![clipboard.png](Github%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C.assets/clip_image020.gif)

- 解决方案：通过pull命令将A成员更新过的代码拉取到本地仓库，随后将出现本地的冲突文件（参考git命令详解冲突问题），分析文件（注意：需要征求A成员的意见！不要乱改别人代码），并修改冲突，随后再进行push操作。

 

 

 